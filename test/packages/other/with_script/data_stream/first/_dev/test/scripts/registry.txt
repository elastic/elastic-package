compile_registry_state -pretty keys_log.json
cmp stdout want_keys_log_0.json

compile_registry_state -pretty -start=3 keys_log.json
cmp stdout want_keys_log_3.json

compile_registry_state -pretty key_log.json
cmp stdout want_key_log.json

compile_registry_state -pretty keys_removed_log.json
cmp stdout want_keys_removed_log.json

-- keys_log.json --
{"op":"set", "id": 1}
{"K":"key0","V":{"a":0}}
{"op":"set", "id": 2}
{"K":"key1","V":{"a":1}}
{"op":"set", "id": 3}
{"K":"key2","V":{"a":2}}
{"op":"set", "id": 4}
{"K":"key3","V":{"a":3}}
{"op":"set", "id": 5}
{"K":"key4","V":{"a":4}}
{"op":"set", "id": 6}
{"K":"key5","V":{"a":5}}
-- want_keys_log_0.json --
{
  "key0": {
    "a": 0
  },
  "key1": {
    "a": 1
  },
  "key2": {
    "a": 2
  },
  "key3": {
    "a": 3
  },
  "key4": {
    "a": 4
  },
  "key5": {
    "a": 5
  }
}
-- want_keys_log_3.json --
{
  "key2": {
    "a": 2
  },
  "key3": {
    "a": 3
  },
  "key4": {
    "a": 4
  },
  "key5": {
    "a": 5
  }
}
-- key_log.json --
{"op":"set", "id": 1}
{"K":"key0","V":{"a":0}}
{"op":"set", "id": 2}
{"K":"key0","V":{"a":1}}
{"op":"set", "id": 3}
{"K":"key0","V":{"a":2}}
{"op":"set", "id": 4}
{"K":"key0","V":{"a":3}}
{"op":"set", "id": 5}
{"K":"key0","V":{"a":4}}
{"op":"set", "id": 6}
{"K":"key0","V":{"a":5}}
-- want_key_log.json --
{
  "key0": {
    "a": 5
  }
}
-- keys_removed_log.json --
{"op":"set", "id": 1}
{"K":"key0","V":{"a":0}}
{"op":"set", "id": 2}
{"K":"key1","V":{"a":1}}
{"op":"set", "id": 3}
{"K":"key2","V":{"a":2}}
{"op":"set", "id": 4}
{"K":"key3","V":{"a":3}}
{"op":"set", "id": 5}
{"K":"key4","V":{"a":4}}
{"op":"set", "id": 6}
{"K":"key5","V":{"a":5}}
{"op":"remove", "id": 7}
{"K":"key3"}
-- want_keys_removed_log.json --
{
  "key0": {
    "a": 0
  },
  "key1": {
    "a": 1
  },
  "key2": {
    "a": 2
  },
  "key4": {
    "a": 4
  },
  "key5": {
    "a": 5
  }
}
