title: "{{.Manifest.Title}}"
type: {{.Manifest.Type}}
streams:{{ if eq .Manifest.Type "logs" }}
{{- range .Manifest.Streams }}
  - input: {{ .Input }}
{{- if .Title }}
    title: {{ .Title }}
{{- end }}
{{- if .Description }}
    description: |-
{{ indent .Description 6 }}
{{- end }}
{{- if .TemplatePath }}
    template_path: {{ .TemplatePath }}
{{- end }}
    vars:
{{- range .Vars }}
    - name: {{ .Name }}
{{- if .Type }}
      type: {{ .Type }}
{{- end }}
{{- if .Multi }}
      multi: {{ .Multi }}
{{- end }}
{{- if .Required }}
      required: {{ .Required }}
{{- end -}}
{{- if .ShowUser }}
      show_user: {{ .ShowUser }}
{{- end }}
{{- if .Description }}
      description: |-
{{ indent .Description 8 }}
{{- end }}
{{- end }} {{/* .Vars */}}
{{- end }} {{/* .Manifest.Streams */}}
{{ else }}
  - input: sample/metrics
    title: Sample metrics
    description: Collect sample metrics
    vars:
      - name: period
        type: text
        title: Period
        default: 10s
{{- end }}
{{ if .Manifest.Elasticsearch }}
elasticsearch:
{{ if .Manifest.Elasticsearch.SourceMode }}
  source_mode: {{ .Manifest.Elasticsearch.SourceMode }}
{{- end }}
{{ if .Manifest.Elasticsearch.IndexMode }}
  index_mode: {{- .Manifest.Elasticsearch.IndexMode }}
{{- end }}
{{- if .Manifest.Elasticsearch.IndexTemplate }}
  index_template:
{{ if .Manifest.Elasticsearch.IndexTemplate.Mappings }}
    mappings:
      subobjects: {{ .Manifest.Elasticsearch.IndexTemplate.Mappings.Subobjects }}
{{- end }}
{{- end }}
{{- end }}
